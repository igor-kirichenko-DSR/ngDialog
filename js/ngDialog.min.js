/*! ng-dialog - v1.4.1 (https://github.com/likeastore/ngDialog) */
!function(a,b){"undefined"!=typeof module&&module.exports?(b("undefined"==typeof angular?require("angular"):angular),module.exports="ngDialog"):"function"==typeof define&&define.amd?define(["angular"],b):b(a.angular)}(this,function(a){"use strict";var b=a.module("ngDialog",[]),c=a.element,d=a.isDefined,e=(document.body||document.documentElement).style,f=d(e.animation)||d(e.WebkitAnimation)||d(e.MozAnimation)||d(e.MsAnimation)||d(e.OAnimation),g="animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",h={html:!1,body:!1},i={},j=[],k=[],l=!1,m=!1,n=[],o="legacy",p="1.0.0+";return b.provider("ngDialog",function(){var b=this.defaults={className:"ngdialog-theme-default",appendClassName:"",disableAnimation:!1,plain:!1,showClose:!0,closeByDocument:!0,closeByEscape:!0,closeByNavigation:!1,appendTo:!1,preCloseCallback:!1,onOpenCallback:!1,overlay:!0,cache:!0,trapFocus:!0,preserveFocus:!0,ariaAuto:!0,ariaRole:null,ariaLabelledById:null,ariaLabelledBySelector:null,ariaDescribedById:null,ariaDescribedBySelector:null,bodyClassName:"ngdialog-open",width:null,height:null};this.setForceHtmlReload=function(a){h.html=a||!1},this.setForceBodyReload=function(a){h.body=a||!1},this.setDefaults=function(c){a.extend(b,c)},this.setOpenOnePerName=function(a){m=a||!1};var d,e=0,q=0,r={},s={};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window","$controller","$injector",function(t,u,v,w,x,y,z,A,B,C){var D=[],E={onDocumentKeydown:function(a){27===a.keyCode&&F.close("$escape")},activate:function(a){a.data("$ngDialogOptions").trapFocus&&(a.on("keydown",E.onTrapFocusKeydown),D.body.on("keydown",E.onTrapFocusKeydown))},deactivate:function(a){a.off("keydown",E.onTrapFocusKeydown),D.body.off("keydown",E.onTrapFocusKeydown)},deactivateAll:function(b){a.forEach(b,function(b){var c=a.element(b);E.deactivate(c)})},setBodyPadding:function(a){var b=parseInt(D.body.css("padding-right")||0,10);D.body.css("padding-right",b+a+"px"),D.body.data("ng-dialog-original-padding",b),y.$broadcast("ngDialog.setPadding",a)},resetBodyPadding:function(){var a=D.body.data("ng-dialog-original-padding");a?D.body.css("padding-right",a+"px"):D.body.css("padding-right",""),y.$broadcast("ngDialog.setPadding",0)},performCloseDialog:function(a,b){var c=a.data("$ngDialogOptions"),e=a.attr("id"),h=i[e];if(E.deactivate(a),h){if(void 0!==A.Hammer){var k=h.hammerTime;k.off("tap",d),k.destroy&&k.destroy(),delete h.hammerTime}else a.unbind("click");1===q&&D.body.unbind("keydown",E.onDocumentKeydown),a.hasClass("ngdialog-closing")||(q-=1);var m=a.data("$ngDialogPreviousFocus");m&&m.focus&&m.focus(),y.$broadcast("ngDialog.closing",a,b),q=q<0?0:q,f&&!c.disableAnimation?(h.$destroy(),a.unbind(g).bind(g,function(){E.closeDialogElement(a,b)}).addClass("ngdialog-closing")):(h.$destroy(),E.closeDialogElement(a,b)),r[e]&&(r[e].resolve({id:e,value:b,$dialog:a,remainingDialogs:q}),delete r[e]),i[e]&&delete i[e],j.splice(j.indexOf(e),1),j.length||(D.body.unbind("keydown",E.onDocumentKeydown),l=!1),0==q&&(d=void 0)}},closeDialogElement:function(a,b){var c=a.data("$ngDialogOptions"),d=a.attr("id");a.remove(),k.splice(k.indexOf(c.bodyClassName),1),-1===k.indexOf(c.bodyClassName)&&(D.html.removeClass(c.bodyClassName),D.body.removeClass(c.bodyClassName)),0===q&&E.resetBodyPadding(),s[d]&&(s[d].resolve({id:d,value:b,$dialog:a,remainingDialogs:q}),delete s[d]),y.$broadcast("ngDialog.closed",a,b)},closeDialog:function(b,c){var d=b.data("$ngDialogPreCloseCallback");if(d&&a.isFunction(d)){var e=d.call(b,c);if(a.isObject(e))e.closePromise?e.closePromise.then(function(){E.performCloseDialog(b,c)},function(){return!1}):e.then(function(){E.performCloseDialog(b,c)},function(){return!1});else{if(!1===e)return!1;E.performCloseDialog(b,c)}}else E.performCloseDialog(b,c)},onTrapFocusKeydown:function(b){var c,d=a.element(b.currentTarget);if(d.hasClass("ngdialog"))c=d;else if(null===(c=E.getActiveDialog()))return;var e=9===b.keyCode,f=!0===b.shiftKey;e&&E.handleTab(c,b,f)},handleTab:function(a,b,c){var d=E.getFocusableElements(a);if(0===d.length)return void(document.activeElement&&document.activeElement.blur&&document.activeElement.blur());var e=document.activeElement,f=Array.prototype.indexOf.call(d,e),g=-1===f,h=0===f,i=f===d.length-1,j=!1;c?(g||h)&&(d[d.length-1].focus(),j=!0):(g||i)&&(d[0].focus(),j=!0),j&&(b.preventDefault(),b.stopPropagation())},autoFocus:function(a){var b=a[0],d=b.querySelector("*[autofocus]");if(null===d||(d.focus(),document.activeElement!==d)){var e=E.getFocusableElements(a);if(e.length>0)return void e[0].focus();var f=E.filterVisibleElements(b.querySelectorAll("h1,h2,h3,h4,h5,h6,p,span"));if(f.length>0){var g=f[0];c(g).attr("tabindex","-1").css("outline","0"),g.focus()}}},getFocusableElements:function(a){var b=a[0],c=b.querySelectorAll("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]"),d=E.filterTabbableElements(c);return E.filterVisibleElements(d)},filterTabbableElements:function(a){for(var b=[],d=0;d<a.length;d++){var e=a[d];"-1"!==c(e).attr("tabindex")&&b.push(e)}return b},filterVisibleElements:function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];(d.offsetWidth>0||d.offsetHeight>0)&&b.push(d)}return b},getActiveDialog:function(){var a=document.querySelectorAll(".ngdialog");return 0===a.length?null:c(a[a.length-1])},applyAriaAttributes:function(a,b){if(b.ariaAuto){if(!b.ariaRole){var c=E.getFocusableElements(a).length>0?"dialog":"alertdialog";b.ariaRole=c}b.ariaLabelledBySelector||(b.ariaLabelledBySelector="h1,h2,h3,h4,h5,h6"),b.ariaDescribedBySelector||(b.ariaDescribedBySelector="article,section,p")}b.ariaRole&&a.attr("role",b.ariaRole),E.applyAriaAttribute(a,"aria-labelledby",b.ariaLabelledById,b.ariaLabelledBySelector),E.applyAriaAttribute(a,"aria-describedby",b.ariaDescribedById,b.ariaDescribedBySelector)},applyAriaAttribute:function(a,b,d,e){if(d)return void a.attr(b,d);if(e){var f=a.attr("id"),g=a[0].querySelector(e);if(!g)return;var h=f+"-"+b;return c(g).attr("id",h),a.attr(b,h),h}},detectUIRouter:function(){return C.has("$transitions")?p:!!C.has("$state")&&o},getRouterLocationEventName:function(){return E.detectUIRouter()?"$stateChangeStart":"$locationChangeStart"}},F={__PRIVATE__:E,open:function(f){function g(b,c){var c=c||{};return c.headers=c.headers||{},a.extend(c.headers,{Accept:"text/html"}),y.$broadcast("ngDialog.templateLoading",b),x.get(b,c).then(function(a){return y.$broadcast("ngDialog.templateLoaded",b),a.data||""})}function h(b){return b?a.isString(b)&&p.plain?b:"boolean"!=typeof p.cache||p.cache?g(b,{cache:u}):g(b,{cache:!1}):"Empty template"}var o=null;if(f=f||{},!(m&&f.name&&(o=f.name.toLowerCase().replace(/\s/g,"-")+"-dialog",this.isOpen(o)))){var p=a.copy(b),t=++e;o=o||"ngdialog"+t,j.push(o),void 0!==p.data&&(void 0===f.data&&(f.data={}),f.data=a.merge(a.copy(p.data),f.data)),a.extend(p,f);var G,H;r[o]=G=w.defer(),s[o]=H=w.defer();var I;i[o]=I=a.isObject(p.scope)?p.scope.$new():y.$new();var J,K,L,M=a.extend({},p.resolve);return a.forEach(M,function(b,c){M[c]=a.isString(b)?C.get(b):C.invoke(b,null,null,c)}),w.all({template:h(p.template||p.templateUrl),locals:w.all(M)}).then(function(b){var e=b.template,f=b.locals;p.showClose&&(e+='<button aria-label="Dismiss" class="ngdialog-close"></button>');var g=p.overlay?"":" ngdialog-no-overlay";if(J=c('<div id="'+o+'" class="ngdialog'+g+'"></div>'),J.html(p.overlay?'<div class="ngdialog-overlay"></div><div class="ngdialog-content" role="document">'+e+"</div>":'<div class="ngdialog-content" role="document">'+e+"</div>"),J.data("$ngDialogOptions",p),I.ngDialogId=o,p.data&&a.isString(p.data)){var h=p.data.replace(/^\s*/,"")[0];I.ngDialogData="{"===h||"["===h?a.fromJson(p.data):new String(p.data),I.ngDialogData.ngDialogId=o}else p.data&&a.isObject(p.data)&&(I.ngDialogData=p.data,I.ngDialogData.ngDialogId=o);if(p.className&&J.addClass(p.className),p.appendClassName&&J.addClass(p.appendClassName),p.width&&(L=J[0].querySelector(".ngdialog-content"),a.isString(p.width)?L.style.width=p.width:L.style.width=p.width+"px"),p.height&&(L=J[0].querySelector(".ngdialog-content"),a.isString(p.height)?L.style.height=p.height:L.style.height=p.height+"px"),p.disableAnimation&&J.addClass("ngdialog-disabled-animation"),K=p.appendTo&&a.isString(p.appendTo)?a.element(document.querySelector(p.appendTo)):D.body,E.applyAriaAttributes(J,p),[{name:"$ngDialogPreCloseCallback",value:p.preCloseCallback},{name:"$ngDialogOnOpenCallback",value:p.onOpenCallback}].forEach(function(b){if(b.value){var c;a.isFunction(b.value)?c=b.value:a.isString(b.value)&&I&&(a.isFunction(I[b.value])?c=I[b.value]:I.$parent&&a.isFunction(I.$parent[b.value])?c=I.$parent[b.value]:y&&a.isFunction(y[b.value])&&(c=y[b.value])),c&&J.data(b.name,c)}}),I.closeThisDialog=function(a){E.closeDialog(J,a)},p.controller&&(a.isString(p.controller)||a.isArray(p.controller)||a.isFunction(p.controller))){var i;p.controllerAs&&a.isString(p.controllerAs)&&(i=p.controllerAs);var j=B(p.controller,a.extend(f,{$scope:I,$element:J}),!0,i);p.bindToController&&a.extend(j.instance,{ngDialogId:I.ngDialogId,ngDialogData:I.ngDialogData,closeThisDialog:I.closeThisDialog,confirm:I.confirm}),"function"==typeof j?J.data("$ngDialogControllerController",j()):J.data("$ngDialogControllerController",j)}return z(function(){var b=document.querySelectorAll(".ngdialog");E.deactivateAll(b),v(J)(I);var c=A.innerWidth-D.body.prop("clientWidth");D.html.addClass(p.bodyClassName),D.body.addClass(p.bodyClassName),k.push(p.bodyClassName);var d=c-(A.innerWidth-D.body.prop("clientWidth"));d>0&&E.setBodyPadding(d),K.append(J),E.activate(J),p.trapFocus&&E.autoFocus(J),p.name?y.$broadcast("ngDialog.opened",{dialog:J,name:p.name}):y.$broadcast("ngDialog.opened",J);var e=J.data("$ngDialogOnOpenCallback");e&&a.isFunction(e)&&e.call(J)}),l||(D.body.bind("keydown",E.onDocumentKeydown),l=!0),p.closeByNavigation&&n.push(J),p.preserveFocus&&J.data("$ngDialogPreviousFocus",document.activeElement),d=function(a){var b=!!p.closeByDocument&&c(a.target).hasClass("ngdialog-overlay"),d=c(a.target).hasClass("ngdialog-close");(b||d)&&F.close(J.attr("id"),d?"$closeButton":"$document")},void 0!==A.Hammer?(I.hammerTime=A.Hammer(J[0])).on("tap",d):J.bind("click",d),q+=1,F}),{id:o,closePromise:G.promise,closedPromise:H.promise,close:function(a){E.closeDialog(J,a)}}}},openConfirm:function(d){var e=w.defer(),f=a.copy(b);d=d||{},void 0!==f.data&&(void 0===d.data&&(d.data={}),d.data=a.merge(a.copy(f.data),d.data)),a.extend(f,d),f.scope=a.isObject(f.scope)?f.scope.$new():y.$new(),f.scope.confirm=function(a){e.resolve(a);var b=c(document.getElementById(g.id));E.performCloseDialog(b,a)};var g=F.open(f);if(g)return g.closePromise.then(function(a){return a?e.reject(a.value):e.reject()}),e.promise},isOpen:function(a){return c(document.getElementById(a)).length>0},close:function(a,b){var d=c(document.getElementById(a));if(d.length)E.closeDialog(d,b);else if("$escape"===a){var e=j[j.length-1];d=c(document.getElementById(e)),d.data("$ngDialogOptions").closeByEscape&&E.closeDialog(d,"$escape")}else F.closeAll(b);return F},closeAll:function(a){for(var b=document.querySelectorAll(".ngdialog"),d=b.length-1;d>=0;d--){var e=b[d];E.closeDialog(c(e),a)}},getOpenDialogs:function(){return j},getDefaults:function(){return b}};a.forEach(["html","body"],function(a){if(D[a]=t.find(a),h[a]){var b=E.getRouterLocationEventName();y.$on(b,function(){D[a]=t.find(a)})}});var G=E.detectUIRouter();if(G===p)C.get("$transitions").onStart({},function(a){for(;n.length>0;){var b=n.pop();if(!1===E.closeDialog(b))return!1}});else{var H=G===o?"$stateChangeStart":"$locationChangeStart";y.$on(H,function(a){for(;n.length>0;){var b=n.pop();!1===E.closeDialog(b)&&a.preventDefault()}})}return F}]}),b.directive("ngDialog",["ngDialog",function(b){return{restrict:"A",scope:{ngDialogScope:"="},link:function(c,d,e){d.on("click",function(d){d.preventDefault();var f=a.isDefined(c.ngDialogScope)?c.ngDialogScope:"noScope";a.isDefined(e.ngDialogClosePrevious)&&b.close(e.ngDialogClosePrevious);var g=b.getDefaults();b.open({template:e.ngDialog,className:e.ngDialogClass||g.className,appendClassName:e.ngDialogAppendClass,controller:e.ngDialogController,controllerAs:e.ngDialogControllerAs,bindToController:e.ngDialogBindToController,disableAnimation:e.ngDialogDisableAnimation,scope:f,data:e.ngDialogData,showClose:"false"!==e.ngDialogShowClose&&("true"===e.ngDialogShowClose||g.showClose),closeByDocument:"false"!==e.ngDialogCloseByDocument&&("true"===e.ngDialogCloseByDocument||g.closeByDocument),closeByEscape:"false"!==e.ngDialogCloseByEscape&&("true"===e.ngDialogCloseByEscape||g.closeByEscape),overlay:"false"!==e.ngDialogOverlay&&("true"===e.ngDialogOverlay||g.overlay),preCloseCallback:e.ngDialogPreCloseCallback||g.preCloseCallback,onOpenCallback:e.ngDialogOnOpenCallback||g.onOpenCallback,bodyClassName:e.ngDialogBodyClass||g.bodyClassName})})}}}]),b});